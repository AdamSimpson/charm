\chapter{Initialization and Completion}


\function{void ConverseInit(char *argv[])}
\index{ConverseInit}
\desc{This function initializes the machine interface. It should be
called prior to any other Converse functions. 
Multiple calls to this function in a process should
be avoided. \param{argv} is in similar format as passed to
\param{main(argc, argv)}. 
It would be utilized by \param{ConverseInit()} to initialize
machine specific parameters such as number of processors.}

\function{void ConverseExit(void)}
\index{ConverseExit}
\desc{This function frees the resources acquired by Converse and wraps up. 
Any other Converse function should not be called after a call to this function.
\note{It does not terminate the calling
process. A separate call to \param{exit()} is needed after 
\param{ConverseExit()} to achieve this.}}


\chapter{Scheduler Calls}

%These are the calls/macros provided by the Converse scheduler.
%All declarations are in converse.h.

\internal{
\function {void CsdInit(void)}
This call initializes the Converse scheduler, it is called from
ConverseInit().
}

\function {void CsdScheduler(int NumberOfMessages)}
\index{CsdScheduler}
\desc{This call invokes the Converse scheduler, which repeatedly
delivers messages to their handlers (i.e. invokes the handler for each
message it selects).  Each message header encodes a pointer to its
handler as described in the next chapter. 
In each iteration, the scheduler first looks for any
message that  has arrived from another processor, and delivers it.
If there isn't any, it selects a message from the locally enqueued
messages (see below), and delivers it.
The {\tt NumberOfMessages}
parameter specifies how many messages should be processed (i.e. delivered
to their handlers). If set to -1, the scheduler continues delivering
messages until CsdExitScheduler() is called from a message handler.
if {\tt NumberOfMessages} is 0, the scheduler continues delivering messages
until it exhausts its supply of messages (i.e. becomes idle) or some 
handler calls CsdExitScheduler().}

\function {void CsdExitScheduler(void)}
\index{CsdExitScheduler}
\desc{This call causes the scheduler
to stop processing messages when control has returned back to it.
The scheduler then returns to its calling routine.}

\function{void CsdEnqueueGeneral(void *Message, int strategy, int priobits, int *prioptr)}
\index{CsdEnqueueGeneral}
\desc{This call enqueues a message to the scheduler's queue, to be processed in 
accordance with the queueing \param{strategy}. \param{priobits} and
\param{prioptr} specify information about priority associated with the message
if prioritized queueing strategies are used. \param{strategy} can take values 
defined in {\tt converse.h} depending upon the queueing strategy (FIFO or LIFO)
and the nature of priority information used (none, integer or bit-vector).
These predefined constants are: 
{\tt CQS\_QUEUEING\_FIFO}, {\tt CQS\_QUEUEING\_LIFO},
{\tt CQS\_QUEUEING\_IFIFO}, {\tt CQS\_QUEUEING\_ILIFO},
{\tt CQS\_QUEUEING\_BFIFO}, and\\  {\tt CQS\_QUEUEING\_BLIFO}.
This call is usually made from
a message handler when the message is not to be processed immediately,
but may be processed later (e.g. depending on the message's priority).
Also, it is used to enqueue local ready entities, such as threads.
\note{It is necessary to grab the ownership of the message buffer before queuing
because on returning from the handler, the system can reuse the buffer.}}

\function {void CsdEnqueue(void *Message)}
\index{CsdEnqueue}
\function{void CsdEnqueueFifo(void *Message)}
\index{CsdEnqueueFifo}
\desc{
	This macro is a shorthand for 
	{\tt CsdEnqueueGeneral(Message, CQS\_QUEUEING\_FIFO,0, NULL)} 
	provided here for backward compatibility.
}


\function{void CsdEnqueueLifo(void *Message)}
\index{CsdEnqueueLifo}
\desc{
	This macro is a shorthand for
	{\tt CsdEnqueueGeneral(Message, CQS\_QUEUEING\_LIFO,0, NULL)} 
	provided here for backward compatibility.
}

\function{int CsdEmpty()}
\index{CsdEmpty}
\desc{
	This function returns non-zero integer when the scheduler's queue
	is empty, zero otherwise.
}
